(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,n){e.exports=n(39)},18:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(11),o=n.n(u),c=(n(18),n(2)),l=function(e){var t=e.setShowAll,n=e.setSearchParam;return r.a.createElement("p",null,"rajaa n\xe4ytett\xe4vi\xe4 ",r.a.createElement("input",{onChange:function(e){t(!1),n(e.target.value)}}))},i=function(e){var t=e.newName,n=e.newNumber,a=e.persons,u=e.setPersons,o=e.setNewName,c=e.setNewNumber,l=e.personService,i=e.setErrorMessage;return r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var r={name:t,number:n};a.filter(function(e){return e.name===t}).length>0?window.confirm("".concat(t," on jo luettelossa, korvataanko vanha numero uudella?"))&&l.update(a.filter(function(e){return e.name===t})[0].id,r).then(o(""),c(""),i("Muokattiin onnistuneesti"),setTimeout(function(){i(null)},2e3)):l.create(r).then(o(""),c(""),i("Lis\xe4ttiin onnistuneesti"),setTimeout(function(){i(null)},5e3)).catch(function(e){i("Error: ".concat(e.response.data.error)),setTimeout(function(){i(null)},1e4)}),l.getAll().then(function(e){u(e.data)})}},r.a.createElement("div",null,"nimi: ",r.a.createElement("input",{value:t,onChange:function(e){o(e.target.value)}})),r.a.createElement("div",null,"numero: ",r.a.createElement("input",{value:n,onChange:function(e){c(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"lis\xe4\xe4")))},s=function(e){var t=e.persons,n=e.showAll,a=e.searchParam,u=e.handleDestroy;return(n?t:t.filter(function(e){return e.name.toUpperCase().includes(a.toUpperCase())})).map(function(e){return r.a.createElement("p",{key:e.name},e.name," ",e.number," ",r.a.createElement("button",{onClick:function(){return u(e.id)}},"poista")," ")})},m=n(3),f=n.n(m),p="/api/persons",d={getAll:function(){return f.a.get(p)},create:function(e){return f.a.post(p,e)},update:function(e,t){return f.a.put("".concat(p,"/").concat(e),t)},destroy:function(e){return f.a.delete("".concat(p,"/").concat(e))}},h=function(e){var t=e.message;return null===t?null:r.a.createElement("div",{className:"notification"},t)},E=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],u=t[1],o=Object(a.useState)(""),m=Object(c.a)(o,2),f=m[0],p=m[1],E=Object(a.useState)(""),b=Object(c.a)(E,2),v=b[0],w=b[1],g=Object(a.useState)(!0),j=Object(c.a)(g,2),N=j[0],O=j[1],S=Object(a.useState)(""),k=Object(c.a)(S,2),y=k[0],P=k[1],A=Object(a.useState)(null),C=Object(c.a)(A,2),T=C[0],D=C[1];Object(a.useEffect)(function(){d.getAll().then(function(e){u(e.data)})},[]);return r.a.createElement("div",null,r.a.createElement(h,{message:T}),r.a.createElement("h2",null,"Puhelinluettelo"),r.a.createElement(l,{setShowAll:O,setSearchParam:P}),r.a.createElement("h3",null,"Lis\xe4\xe4 uusi"),r.a.createElement(i,{newName:f,newNumber:v,persons:n,setPersons:u,setNewName:p,setNewNumber:w,personService:d,setErrorMessage:D}),r.a.createElement("h3",null,"Numerot"),r.a.createElement(s,{persons:n,showAll:N,searchParam:y,handleDestroy:function(e){window.confirm("Haluatko varmasti poistaa k\xe4ytt\xe4j\xe4n?")&&d.destroy(e).then(u(n.filter(function(t){return t.id!==e})),D("Poistettiin onnistuneesti"),setTimeout(function(){D(null)},2e3)).catch(function(t){console.log(t),alert("henkil\xf6 on jo poistettu"),u(n.filter(function(t){return t.id!==e}))})}}))};o.a.render(r.a.createElement(E,null),document.getElementById("root"))}},[[12,2,1]]]);
//# sourceMappingURL=main.2a61e9ff.chunk.js.map
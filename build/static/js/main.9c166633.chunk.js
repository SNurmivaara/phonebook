(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,n){e.exports=n(39)},18:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(11),o=n.n(u),c=(n(18),n(2)),l=function(e){var t=e.setShowAll,n=e.setSearchParam;return r.a.createElement("p",null,"rajaa n\xe4ytett\xe4vi\xe4 ",r.a.createElement("input",{onChange:function(e){t(!1),n(e.target.value)}}))},i=n(3),s=n.n(i),m="/api/persons",f={getAll:function(){return s.a.get(m)},create:function(e){return s.a.post(m,e)},update:function(e,t){return s.a.put("".concat(m,"/").concat(e),t)},destroy:function(e){return s.a.delete("".concat(m,"/").concat(e))}},p=function(e){var t=e.newName,n=e.newNumber,a=e.persons,u=e.setPersons,o=e.setNewName,c=e.setNewNumber,l=e.personService,i=e.setErrorMessage;return r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var r={name:t,number:n,id:t};a.filter(function(e){return e.name===t}).length>0?window.confirm("".concat(t," on jo luettelossa, korvataanko vanha numero uudella?"))&&l.update(r.id,r).then(i("Muokattiin onnistuneesti"),setTimeout(function(){i(null)},2e3)):l.create(r).then(function(e){u(a.concat(r)),o(""),c(""),i("Lis\xe4ttiin onnistuneesti"),setTimeout(function(){i(null)},2e3)})}},r.a.createElement("div",null,"nimi: ",r.a.createElement("input",{value:t,onChange:function(e){o(e.target.value)}})),r.a.createElement("div",null,"numero: ",r.a.createElement("input",{value:n,onChange:function(e){c(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"lis\xe4\xe4")))},d=function(e){var t=e.persons,n=e.showAll,a=e.searchParam,u=e.handleDestroy;return(n?t:t.filter(function(e){return e.name.toUpperCase().includes(a.toUpperCase())})).map(function(e){return r.a.createElement("p",{key:e.name},e.name," ",e.number," ",r.a.createElement("button",{onClick:function(){return u(e.id)}},"poista")," ")})},h=function(e){var t=e.message;return null===t?null:r.a.createElement("div",{className:"notification"},t)},b=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],u=t[1],o=Object(a.useState)(""),i=Object(c.a)(o,2),s=i[0],m=i[1],b=Object(a.useState)(""),E=Object(c.a)(b,2),v=E[0],w=E[1],j=Object(a.useState)(!0),g=Object(c.a)(j,2),N=g[0],O=g[1],S=Object(a.useState)(""),k=Object(c.a)(S,2),y=k[0],P=k[1],A=Object(a.useState)(null),C=Object(c.a)(A,2),D=C[0],M=C[1];Object(a.useEffect)(function(){f.getAll().then(function(e){u(e.data)})},[]);return r.a.createElement("div",null,r.a.createElement(h,{message:D}),r.a.createElement("h2",null,"Puhelinluettelo"),r.a.createElement(l,{setShowAll:O,setSearchParam:P}),r.a.createElement("h3",null,"Lis\xe4\xe4 uusi"),r.a.createElement(p,{newName:s,newNumber:v,persons:n,setPersons:u,setNewName:m,setNewNumber:w,personService:f,setErrorMessage:M}),r.a.createElement("h3",null,"Numerot"),r.a.createElement(d,{persons:n,showAll:N,searchParam:y,handleDestroy:function(e){window.confirm("Haluatko varmasti poistaa k\xe4ytt\xe4j\xe4n?")&&f.destroy(e).then(u(n.filter(function(t){return t.id!==e})),M("Poistettiin onnistuneesti"),setTimeout(function(){M(null)},2e3)).catch(function(t){console.log(t),alert("henkil\xf6 on jo poistettu"),u(n.filter(function(t){return t.id!==e}))})}}))};o.a.render(r.a.createElement(b,null),document.getElementById("root"))}},[[12,2,1]]]);
//# sourceMappingURL=main.9c166633.chunk.js.map